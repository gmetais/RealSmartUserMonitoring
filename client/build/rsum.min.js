/* RealSmartUserMonitoring 0.1.0 http://github.com/gmetais/RealSmartUserMonitoring */
!function(a,b,c){"use strict";function d(){return Date.now()+""+Math.round(1e4*Math.random())}function e(){if(j.sample<1){if(k.inSample!==c)return k.inSample;var a=Math.random()<j.sample;return k.inSample=a,a}return!0}function f(){function a(){return"complete"===b.readyState?(setTimeout(g,1),!0):!1}a()||b.addEventListener("readystatechange",a)}function g(){var b=a.performance.timing;l.responseStart=b.responseStart-b.fetchStart,l.responseEnd=b.responseEnd-b.fetchStart,l.domInteractive=b.domInteractive-b.fetchStart,l.loadEventEnd=b.loadEventEnd-b.fetchStart,i()}function h(){}function i(){a.localStorage.setItem("rsum",JSON.stringify(k))}var j={serverHost:"/rsum",sample:1,conversion:!1},k=JSON.parse(a.localStorage.getItem("rsum")||"{}");if(k.expireDate!==c&&k.expireDate<Date.now()&&(k={}),k.expireDate===c&&(k.sessionId=d()),!e())return i();k.pages=k.pages||[];var l={pageId:d(),date:Date.now(),firstPage:0===k.pages.length};k.pages.push(l),i(),f(),a.RSUM={setOptions:function(a){return dataSent?void console.error("RSUM.setOptions called too late"):void(j={serverHost:a.host||j.serverHost,sample:a.sample||j.sample,conversion:a.conversion||j.conversion})},conversion:function(){l.conversion=!0,i(),h()},getState:function(){return k}}}(this,this.document);